# 复制为 config.toml 使用
orchestrator_url = "ws://localhost:3000/ws/agent"
auth_token = ""

heartbeat_seconds = 30
mock_mode = false

# 在 sandbox 内启动 ACP agent 的命令（建议镜像内预装 codex-acp，然后直接运行）
agent_command = ["codex-acp"]

[sandbox]
# 统一沙箱配置：provider + image + 运行参数
terminalEnabled = true

# ACP agent 启动模式：
# - "exec"（默认）：容器常驻（sleep），acp-proxy 用 `docker exec` 启动 agent（历史模式）
# - "entrypoint"：容器主进程为 agent（PID1=codex-acp），acp-proxy 通过 stdio 与其通讯
agentMode = "exec"

# provider: "container_oci" | "boxlite_oci"
provider = "container_oci"

# 仅 provider=container_oci 时需要：docker/podman/nerdctl
runtime = "docker"

# 运行 ACP agent 的 OCI 镜像名
# 本仓库提供 acp-proxy/agent-images/codex-acp/Dockerfile 可构建 tuixiu-codex-acp:local
image = "tuixiu-codex-acp:local"

# 容器/BoxLite 内的工作目录（Run 的 workspace 固定在 guest 内 /workspace；通常由 `acp_open.init.script` 负责 git clone）
workingDir = "/workspace"

# 仅 provider=container_oci 时使用：透传给 `<runtime> run` 的额外参数
# extraRunArgs = ["--network=host"]

[sandbox.env]
OPENAI_API_KEY = "<set-me>"

# Codex（`codex` / `codex-acp`）通常需要读取宿主机的 `~/.codex/config.toml`。
# 这里建议把该文件以只读方式挂载到容器内 `/root/.codex/config.toml`（镜像默认以 root 运行）。
#
# 注意：`docker` 不会自动展开 `~`，请写绝对路径。
# Windows 示例：C:/Users/<you>/.codex/config.toml
# macOS/Linux 示例：/Users/<you>/.codex/config.toml 或 /home/<you>/.codex/config.toml
#
# [[sandbox.volumes]]
# hostPath = "C:/Users/<you>/.codex/config.toml"
# guestPath = "/root/.codex/config.toml"
# readOnly = true


[agent]
# 上报到 orchestrator 的 agent 识别信息（建议全局唯一 id）
id = "codex-agent-1"
name = "codex-agent-1"
max_concurrent = 5

[agent.capabilities]
languages = ["typescript"]
tools = ["git", "docker", "pnpm"]
